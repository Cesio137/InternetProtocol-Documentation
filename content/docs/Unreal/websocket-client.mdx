---
title: Websocket Client
description: How to use Websocket client class
---

import { Step, Steps } from "fumadocs-ui/components/steps";
import { Tab, Tabs } from "fumadocs-ui/components/tabs";
import { ImageZoom } from "fumadocs-ui/components/image-zoom";

## References

<Tabs items={["Include"]}>
    <Tab value="Include">#include "websocket/wsclient.h"</Tab>
</Tabs>

## How to use

<Steps>
  <Step>
    Blueprint: search by [`GetInternetProtocolSubsystem`](/docs/Unreal/subsystem#how-to-use) and call [`CreateWebsocketClient`](/docs/Unreal/subsystem#create-websocket-client) function
  </Step>
  <Step>
    C++: Use the code bellow
    ``` cpp
    #include "websocket/wsclient.h"

    UWSClient* client = NewObject<UWSClient>();
    ```

  </Step>
</Steps>

## Variables

### Handshake

-   Set/Get handshake headers.

<UVar 
pin={{ name: "Handshake", pintype: "struct" }}
/>

## Functions

## Functions

### Is Open

-   Return true if socket is open.

<UFunction
  name="Is Open"
  pure={true}
  outPins={[
    { name: "Return Value", pintype: "bool" }
  ]}
/>

### Local Endpoint

-   Get the local endpoint of the socket. Use this function only after open connection.

<UFunction
  name="Local Endpoint"
  pure={true}
  outPins={[
    { name: "Return Value", pintype: "struct" }
  ]}
/>

### Remote Endpoint

-   Get the remote endpoint of the socket. Use this function only after open connection.

<UFunction
  name="Remote Endpoint"
  pure={true}
  outPins={[
    { name: "Return Value", pintype: "struct" }
  ]}
/>

### Get Error Code

-   Return a struct of the latest error code returned by asio.

<UFunction
  name="Get Error Code"
  pure={true}
  outPins={[
    { name: "Return Value", pintype: "struct" }
  ]}
/>

### Write

-   Sends string data on the socket.
-   It returns false if socket is closed or if buffer is empty.

<UFunction
  name="Write"
  className="WSClient"
  pure={false}
  inPins={[
    { name: "", pintype: "exec" },
    { name: "Target", pintype: "object" },
    { name: "Message", pintype: "fstring" },
    { name: "Callback", pintype: "delegate" }
  ]}
  outPins={[
    { name: "", pintype: "exec" },
    { name: "Return Value", pintype: "bool" }
  ]}
/>
<UEvents
  name="On Message Sent"
  showBindNode={false}
  outPins={[
    { name: "", pintype: "exec" },
    { name: "Error Code", pintype: "struct" },
    { name: "Bytes Sent", pintype: "int" }
  ]}
/>

### Write Buffer

-   Sends buffer data on the socket.
-   It returns false if socket is closed or if buffer is empty.

<UFunction
  name="Write Buffer"
  className="WSClient"
  pure={false}
  inPins={[
    { name: "", pintype: "exec" },
    { name: "Target", pintype: "object" },
    { name: "Buffer", pintype: "bytearray" },
    { name: "Callback", pintype: "delegate" }
  ]}
  outPins={[
    { name: "", pintype: "exec" },
    { name: "Return Value", pintype: "bool" }
  ]}
/>

<UEvents
  name="On Message Sent"
  showBindNode={false}
  outPins={[
    { name: "", pintype: "exec" },
    { name: "Error Code", pintype: "struct" },
    { name: "Bytes Sent", pintype: "int" }
  ]}
/>

### Ping

-   Send a ping message.
-   It returns false if socket is closed or if buffer is empty.

<UFunction
  name="Ping"
  className="WSClient"
  pure={false}
  inPins={[
    { name: "", pintype: "exec" },
    { name: "Target", pintype: "object" },
    { name: "Callback", pintype: "delegate" }
  ]}
  outPins={[
    { name: "", pintype: "exec" },
    { name: "Return Value", pintype: "bool" }
  ]}
/>

<UEvents
  name="On Message Sent"
  showBindNode={false}
  outPins={[
    { name: "", pintype: "exec" },
    { name: "Error Code", pintype: "struct" },
    { name: "Bytes Sent", pintype: "int" }
  ]}
/>

### Pong

-   Send a pong message.
-   It returns false if socket is closed or if buffer is empty.

<UFunction
  name="Pong"
  className="WSClient"
  pure={false}
  inPins={[
    { name: "", pintype: "exec" },
    { name: "Target", pintype: "object" },
    { name: "Callback", pintype: "delegate" }
  ]}
  outPins={[
    { name: "", pintype: "exec" },
    { name: "Return Value", pintype: "bool" }
  ]}
/>

<UEvents
  name="On Message Sent"
  showBindNode={false}
  outPins={[
    { name: "", pintype: "exec" },
    { name: "Error Code", pintype: "struct" },
    { name: "Bytes Sent", pintype: "int" }
  ]}
/>

### Connect

-   Listen for datagram messages on a named port and address.
-   It returns false if socket is already open or if asio return any error code during the bind.

<UFunction
  name="Connect"
  className="WSClient"
  pure={false}
  inPins={[
    { name: "", pintype: "exec" },
    { name: "Target", pintype: "object" },
    { name: "Bind Opts", pintype: "struct" }
  ]}
  outPins={[
    { name: "", pintype: "exec" },
    { name: "Return Value", pintype: "bool" }
  ]}
/>

### End

-   Perform a smooth close of socket following ws protocol and stop listening for data on it. 'on_close' event will be triggered.

<UFunction
  name="End"
  className="WSClient"
  pure={false}
  inPins={[
    { name: "", pintype: "exec" },
    { name: "Target", pintype: "object" },
    { name: "Code", pintype: "int" },
    { name: "Reason", pintype: "fstring" }
  ]}
  outPins={[
    { name: "", pintype: "exec" }
  ]}
/>

### Close

-   Close the underlying socket and stop listening for data on it. 'on_close' event will be triggered.

<UFunction
  name="Close"
  className="WSClient"
  pure={false}
  inPins={[
    { name: "", pintype: "exec" },
    { name: "Target", pintype: "object" },
    { name: "Code", pintype: "int" },
    { name: "Reason", pintype: "fstring" }
  ]}
  outPins={[
    { name: "", pintype: "exec" }
  ]}
/>

## Events

### On Connected

-   Event triggered when a connection is estabilished.

<UEvents
  name="On Connected"
  showBindNode={true}
  outPins={[
    { name: "", pintype: "exec" },
    { name: "Handshake", pintype: "struct" }
  ]}
/>

### On Unexpected Handshake

-   Event triggered when a connection is estabilished.

<UEvents
  name="On Unexpected Handshake"
  showBindNode={true}
  outPins={[
    { name: "", pintype: "exec" },
    { name: "Handshake", pintype: "struct" }
  ]}
/>

### On Message

-   Event triggered when socket send or receive data.

<UEvents
  name="On Message"
  showBindNode={true}
  outPins={[
    { name: "", pintype: "exec" },
    { name: "Buffer", pintype: "bytearray" },
    { name: "Is Binary", pintype: "bool" }
  ]}
/>

### On Ping

-   This event will be triggered when a ping has been received.

<UEvents
  name="On Ping"
  showBindNode={true}
  outPins={[
    { name: "", pintype: "exec" }
  ]}
/>

### On Pong

-   This event will be triggered when a pong has been received.

<UEvents
  name="On Pong"
  showBindNode={true}
  outPins={[
    { name: "", pintype: "exec" }
  ]}
/>

### On Close

-   Event triggered when socket is closed.

<UEvents
  name="On Close"
  showBindNode={true}
  outPins={[
    { name: "", pintype: "exec" },
    { name: "Code", pintype: "int" },
    { name: "Reason", pintype: "fstring" }
  ]}
/>

### On Error

-   Event triggered if any error occur during async process.

<UEvents
  name="On Error"
  showBindNode={true}
  outPins={[
    { name: "", pintype: "exec" },
    { name: "Error Code", pintype: "bool" }
  ]}
/>
